From 99f60049e0142aa880a6775c7ba4e4fca1a3dc97 Mon Sep 17 00:00:00 2001
From: David Alonso <dam.phys@gmail.com>
Date: Thu, 12 Aug 2021 15:14:09 +0100
Subject: [PATCH] healpy fix

---
 test/test_nmt_covar.py  | 6 ++++--
 test/test_nmt_field.py  | 5 +++--
 test/test_nmt_master.py | 8 ++++----
 3 files changed, 11 insertions(+), 8 deletions(-)

diff --git a/test/test_nmt_covar.py b/test/test_nmt_covar.py
index 2950077..948887e 100644
--- a/test/test_nmt_covar.py
+++ b/test/test_nmt_covar.py
@@ -157,9 +157,11 @@ def setUp(self):
         self.nside = 64
         self.nlb = 16
         self.npix = hp.nside2npix(self.nside)
-        msk = hp.read_map("test/benchmarks/msk.fits", verbose=False)
+        msk = hp.read_map("test/benchmarks/msk.fits", verbose=False,
+                          dtype=float)
         mps = np.array(hp.read_map("test/benchmarks/mps.fits",
-                                   verbose=False, field=[0, 1, 2]))
+                                   verbose=False, field=[0, 1, 2],
+                                   dtype=float))
         self.b = nmt.NmtBin.from_nside_linear(self.nside, self.nlb)
         self.f0 = nmt.NmtField(msk, [mps[0]])
         self.f2 = nmt.NmtField(msk, [mps[1], mps[2]])
diff --git a/test/test_nmt_field.py b/test/test_nmt_field.py
index 92927e5..7f5be16 100644
--- a/test/test_nmt_field.py
+++ b/test/test_nmt_field.py
@@ -219,9 +219,10 @@ def setUp(self):
     def test_field_masked(self):
         nside = 64
         b = nmt.NmtBin.from_nside_linear(nside, 16)
-        msk = hp.read_map("test/benchmarks/msk.fits", verbose=False)
+        msk = hp.read_map("test/benchmarks/msk.fits", verbose=False,
+                          dtype=float)
         mps = np.array(hp.read_map("test/benchmarks/mps.fits",
-                                   verbose=False,
+                                   verbose=False, dtype=float,
                                    field=[0, 1, 2]))
         mps_msk = np.array([m * msk for m in mps])
         f0 = nmt.NmtField(msk, [mps[0]])
diff --git a/test/test_nmt_master.py b/test/test_nmt_master.py
index a6750b4..84ae9af 100644
--- a/test/test_nmt_master.py
+++ b/test/test_nmt_master.py
@@ -151,15 +151,15 @@ def setUp(self):
         self.lmax = 3*self.nside-1
         self.npix = int(hp.nside2npix(self.nside))
         self.msk = hp.read_map("test/benchmarks/msk.fits",
-                               verbose=False)
+                               verbose=False, dtype=float)
         self.mps = np.array(hp.read_map("test/benchmarks/mps.fits",
-                                        verbose=False,
+                                        verbose=False, dtype=float,
                                         field=[0, 1, 2]))
         self.mps_s1 = np.array(hp.read_map("test/benchmarks/mps_sp1.fits",
-                                           verbose=False,
+                                           verbose=False, dtype=float,
                                            field=[0, 1, 2]))
         self.tmp = np.array(hp.read_map("test/benchmarks/tmp.fits",
-                                        verbose=False,
+                                        verbose=False, dtype=float,
                                         field=[0, 1, 2]))
         self.b = nmt.NmtBin.from_nside_linear(self.nside, self.nlb)
         self.f0 = nmt.NmtField(self.msk,
